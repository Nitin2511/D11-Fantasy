<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dream11 Style Fantasy (Fixed)</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
body{font-family:Arial;background:#0a0e27;color:white;padding:20px}
.player{border:1px solid #444;padding:10px;margin:5px;cursor:pointer}
.selected{background:#065f46}
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">

const RULES = {
  MAX_PLAYERS:11,
  MAX_CREDITS:100,
  MAX_PER_TEAM:7,
  MIN_WK:1,
  MIN_BAT:3,
  MIN_BOWL:3,
  MIN_AR:1
};

const PLAYERS={

  India:[
    {id:'i1',name:'Suryakumar Yadav',team:'India',role:'Batsman',credits:10.5},
    {id:'i2',name:'Hardik Pandya',team:'India',role:'All-rounder',credits:10},
    {id:'i3',name:'Jasprit Bumrah',team:'India',role:'Bowler',credits:11},
    {id:'i4',name:'Sanju Samson',team:'India',role:'Wicket-keeper',credits:9.5},
    {id:'i5',name:'Rinku Singh',team:'India',role:'Batsman',credits:9},
    {id:'i6',name:'Axar Patel',team:'India',role:'All-rounder',credits:9.5},
    {id:'i7',name:'Kuldeep Yadav',team:'India',role:'Bowler',credits:9}
  ],

  Pakistan:[
    {id:'p1',name:'Babar Azam',team:'Pakistan',role:'Batsman',credits:11},
    {id:'p2',name:'Mohammad Rizwan',team:'Pakistan',role:'Wicket-keeper',credits:10},
    {id:'p3',name:'Shaheen Afridi',team:'Pakistan',role:'Bowler',credits:11},
    {id:'p4',name:'Shadab Khan',team:'Pakistan',role:'All-rounder',credits:9.5},
    {id:'p5',name:'Naseem Shah',team:'Pakistan',role:'Bowler',credits:9},
    {id:'p6',name:'Fakhar Zaman',team:'Pakistan',role:'Batsman',credits:9},
    {id:'p7',name:'Haris Rauf',team:'Pakistan',role:'Bowler',credits:9}
  ]
};

const MATCHES=[
 {id:1,team1:'India',team2:'Pakistan'}
];

const {useState}=React;

function App(){

 const [match]=useState(MATCHES[0]);
 const [selected,setSelected]=useState([]);
 const [msg,setMsg]=useState('');

 const players=[
  ...PLAYERS[match.team1],
  ...PLAYERS[match.team2]
 ];

 const validate=(list)=>{

  const r={'Wicket-keeper':0,'Batsman':0,'Bowler':0,'All-rounder':0};
  const t={};

  list.forEach(p=>{
    r[p.role]++;
    const team=p.team;
    t[team]=(t[team]||0)+1;
  });

  if(r['Wicket-keeper']<RULES.MIN_WK) return 'Need 1 Wicket-keeper';
  if(r['Batsman']<RULES.MIN_BAT) return 'Need 3 Batsmen';
  if(r['Bowler']<RULES.MIN_BOWL) return 'Need 3 Bowlers';
  if(r['All-rounder']<RULES.MIN_AR) return 'Need 1 All-rounder';

  for(let k in t){
    if(t[k]>RULES.MAX_PER_TEAM) return 'Max 7 from '+k;
  }

  return null;
 };

 const toggle=(p)=>{

  if(selected.find(x=>x.id===p.id)){
    setSelected(selected.filter(x=>x.id!==p.id));
    return;
  }

  if(selected.length>=RULES.MAX_PLAYERS){
    setMsg('11 players max');
    return;
  }

  const newList=[...selected,p];

  const credits=newList.reduce((s,x)=>s+x.credits,0);
  if(credits>RULES.MAX_CREDITS){
    setMsg('Credits exceed 100');
    return;
  }

  const err=validate(newList);
  if(err){
    setMsg(err);
    return;
  }

  setMsg('');
  setSelected(newList);
 };

 return (
  <div>

   <h1>{match.team1} vs {match.team2}</h1>

   <h3>
    {selected.length}/11 Players |
    Credits: {selected.reduce((s,x)=>s+x.credits,0).toFixed(1)}
   </h3>

   <p style={{color:'red'}}>{msg}</p>

   {players.map(p=>{
     const sel=selected.find(x=>x.id===p.id);

     return (
      <div
       key={p.id}
       className={sel?'player selected':'player'}
       onClick={()=>toggle(p)}
      >
       {p.name} ({p.team}) | {p.role} | {p.credits}
      </div>
     );
   })}

  </div>
 );
}

ReactDOM.render(<App/>,document.getElementById('root'));

</script>
</body>
</html>
