<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T20 World Cup Fantasy Contest</title>
    <meta name="description" content="Create teams, compete with friends in T20 World Cup Fantasy Contest">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0a0e27 100%);
            color: #fff;
            min-height: 100vh;
        }
        
        #root { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        .header {
            text-align: center;
            padding: 50px 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 25px;
            margin-bottom: 40px;
            box-shadow: 0 30px 60px rgba(16, 185, 129, 0.4);
            position: relative;
        }
        
        .header h1 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 3.5rem;
            font-weight: 700;
            letter-spacing: 4px;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.5);
        }
        
        .header p { font-size: 1.2rem; margin-top: 10px; opacity: 0.9; }
        
        .user-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .admin-badge {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 35px;
            background: #1a1f3a;
            padding: 12px;
            border-radius: 20px;
            overflow-x: auto;
        }
        
        .tab {
            flex: 1;
            min-width: 100px;
            padding: 15px 18px;
            background: transparent;
            border: none;
            color: #8892b0;
            font-weight: 600;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s;
            font-size: 14px;
            font-family: 'Rajdhani', sans-serif;
            white-space: nowrap;
        }
        
        .tab:hover { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        .tab.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
        }
        
        .card {
            background: linear-gradient(135deg, #1a1f3a 0%, #242b4a 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        
        .card h2 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 2rem;
            margin-bottom: 20px;
            color: #10b981;
            letter-spacing: 1px;
        }
        
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 10px; color: #cbd5e1; font-weight: 600; }
        .input-group input, .input-group select {
            width: 100%;
            padding: 15px;
            background: #0a0e27;
            border: 2px solid #2d3548;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        .btn {
            padding: 15px 35px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            font-size: 17px;
            transition: all 0.3s;
            font-family: 'Rajdhani', sans-serif;
            letter-spacing: 1px;
        }
        .btn:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(16, 185, 129, 0.6); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .btn-secondary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }
        .btn-secondary:hover:not(:disabled) { box-shadow: 0 10px 30px rgba(59, 130, 246, 0.6); }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        .btn-danger:hover:not(:disabled) { box-shadow: 0 10px 30px rgba(239, 68, 68, 0.6); }
        
        .btn-small { padding: 10px 25px; font-size: 14px; }
        
        .match-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }
        
        .match-card {
            background: #0a0e27;
            border-radius: 16px;
            padding: 22px;
            border: 2px solid #2d3548;
            transition: all 0.3s;
            cursor: pointer;
        }
        .match-card:hover { border-color: #10b981; transform: translateY(-5px); }
        .match-card h3 { color: #10b981; margin-bottom: 12px; font-size: 1.3rem; }
        .match-card p { color: #94a3b8; margin: 6px 0; font-size: 14px; }
        
        .player-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .player-card {
            background: #0a0e27;
            border-radius: 14px;
            padding: 18px;
            border: 2px solid #2d3548;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .player-card:hover { border-color: #10b981; }
        .player-card.selected { border-color: #10b981; background: rgba(16, 185, 129, 0.15); }
        .player-card h4 { margin-bottom: 8px; font-size: 1.1rem; }
        .player-card .role { color: #94a3b8; font-size: 13px; margin-bottom: 8px; }
        .player-card .team { color: #64748b; font-size: 12px; }
        
        .selected-team {
            background: #0a0e27;
            border-radius: 14px;
            padding: 22px;
            margin-top: 25px;
        }
        
        .selected-team h3 { color: #10b981; margin-bottom: 18px; font-size: 1.4rem; }
        .selected-team .count { color: #94a3b8; margin-bottom: 15px; }
        
        .selected-players {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .selected-player {
            background: #1a1f3a;
            padding: 14px;
            border-radius: 10px;
            border: 2px solid #2d3548;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .selected-player .name { font-weight: 600; font-size: 15px; }
        .selected-player .role { color: #94a3b8; font-size: 12px; }
        
        .remove-btn {
            background: #ef4444;
            border: none;
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
        }
        
        .captain-selection {
            background: #0a0e27;
            border-radius: 14px;
            padding: 22px;
            margin-top: 25px;
        }
        
        .captain-selection h3 { color: #10b981; margin-bottom: 18px; }
        
        .captain-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .captain-option {
            background: #1a1f3a;
            padding: 14px;
            border-radius: 10px;
            border: 2px solid #2d3548;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .captain-option:hover { border-color: #10b981; }
        .captain-option.selected { border-color: #f59e0b; background: rgba(245, 158, 11, 0.15); }
        
        .my-teams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }
        
        .team-card {
            background: #0a0e27;
            border-radius: 14px;
            padding: 22px;
            border: 2px solid #2d3548;
        }
        
        .team-card h4 { color: #10b981; margin-bottom: 16px; font-size: 1.2rem; }
        
        .team-players-grid {
            display: grid;
            gap: 10px;
        }
        
        .team-player {
            background: #1a1f3a;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 14px;
            border: 1px solid #2d3548;
        }
        
        .team-player.captain {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.15);
        }
        
        .team-player.vc {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.15);
        }
        
        .contest-code {
            background: #0a0e27;
            padding: 20px;
            border-radius: 14px;
            margin-top: 15px;
        }
        
        .contest-code-value {
            font-size: 2rem;
            font-weight: 700;
            color: #10b981;
            letter-spacing: 4px;
            font-family: 'Rajdhani', sans-serif;
            text-align: center;
            padding: 15px;
            background: #1a1f3a;
            border-radius: 10px;
            margin-top: 8px;
        }
        
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .leaderboard-table th, .leaderboard-table td {
            padding: 18px;
            text-align: left;
            border-bottom: 1px solid #2d3548;
        }
        
        .leaderboard-table th {
            background: #0a0e27;
            color: #10b981;
            font-weight: 700;
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .leaderboard-table tr:hover { background: rgba(16, 185, 129, 0.05); }
        
        .rank-badge {
            display: inline-block;
            width: 35px;
            height: 35px;
            line-height: 35px;
            text-align: center;
            border-radius: 50%;
            font-weight: 700;
            background: #2d3548;
        }
        
        .rank-badge.rank-1 {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.5);
        }
        
        .rank-badge.rank-2 {
            background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
        }
        
        .rank-badge.rank-3 {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
        }
        
        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 18px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .info-box h3 { color: #3b82f6; margin-bottom: 12px; font-size: 1.1rem; }
        .info-box p { color: #cbd5e1; margin: 8px 0; font-size: 14px; line-height: 1.6; }
        
        .points-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .points-input-item label {
            display: block;
            margin-bottom: 6px;
            color: #cbd5e1;
            font-weight: 600;
            font-size: 14px;
        }
        
        .points-input-item input {
            width: 100%;
            padding: 12px;
            background: #0a0e27;
            border: 2px solid #2d3548;
            border-radius: 10px;
            color: white;
            font-size: 16px;
        }
        
        .auth-container {
            max-width: 450px;
            margin: 100px auto;
        }
        
        .auth-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .auth-tab {
            flex: 1;
            padding: 12px;
            background: #1a1f3a;
            border: none;
            color: #8892b0;
            font-weight: 600;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s;
        }
        
        .auth-tab.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .error-message {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid #ef4444;
            color: #fca5a5;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .success-message {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid #10b981;
            color: #6ee7b7;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .match-grid, .player-grid, .my-teams-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const MATCHES = [
            { id: 1, team1: 'India', team2: 'Pakistan', date: '2026-06-01', venue: 'New York' },
            { id: 2, team1: 'Australia', team2: 'England', date: '2026-06-02', venue: 'Barbados' },
            { id: 3, team1: 'South Africa', team2: 'West Indies', date: '2026-06-03', venue: 'Trinidad' },
            { id: 4, team1: 'New Zealand', team2: 'Sri Lanka', date: '2026-06-04', venue: 'Dallas' },
            { id: 5, team1: 'Bangladesh', team2: 'Afghanistan', date: '2026-06-05', venue: 'New York' },
        ];

        const PLAYERS = [
            { id: 1, name: 'Virat Kohli', team: 'India', role: 'Batsman' },
            { id: 2, name: 'Rohit Sharma', team: 'India', role: 'Batsman' },
            { id: 3, name: 'Jasprit Bumrah', team: 'India', role: 'Bowler' },
            { id: 4, name: 'Hardik Pandya', team: 'India', role: 'All-rounder' },
            { id: 5, name: 'Babar Azam', team: 'Pakistan', role: 'Batsman' },
            { id: 6, name: 'Shaheen Afridi', team: 'Pakistan', role: 'Bowler' },
            { id: 7, name: 'Steve Smith', team: 'Australia', role: 'Batsman' },
            { id: 8, name: 'Pat Cummins', team: 'Australia', role: 'Bowler' },
            { id: 9, name: 'Glenn Maxwell', team: 'Australia', role: 'All-rounder' },
            { id: 10, name: 'Jos Buttler', team: 'England', role: 'Batsman' },
            { id: 11, name: 'Ben Stokes', team: 'England', role: 'All-rounder' },
            { id: 12, name: 'Jofra Archer', team: 'England', role: 'Bowler' },
            { id: 13, name: 'Quinton de Kock', team: 'South Africa', role: 'Batsman' },
            { id: 14, name: 'Kagiso Rabada', team: 'South Africa', role: 'Bowler' },
            { id: 15, name: 'Chris Gayle', team: 'West Indies', role: 'Batsman' },
            { id: 16, name: 'Andre Russell', team: 'West Indies', role: 'All-rounder' },
            { id: 17, name: 'Kane Williamson', team: 'New Zealand', role: 'Batsman' },
            { id: 18, name: 'Trent Boult', team: 'New Zealand', role: 'Bowler' },
            { id: 19, name: 'Wanindu Hasaranga', team: 'Sri Lanka', role: 'All-rounder' },
            { id: 20, name: 'Shakib Al Hasan', team: 'Bangladesh', role: 'All-rounder' },
        ];

        // Admin credentials
        const ADMIN_USERNAME = 'Nitin';
        const ADMIN_PASSWORD = 'RishiNitin123';

        function App() {
            const [currentUser, setCurrentUser] = useState(null);
            const [authMode, setAuthMode] = useState('login');
            const [loginUsername, setLoginUsername] = useState('');
            const [loginPassword, setLoginPassword] = useState('');
            const [signupUsername, setSignupUsername] = useState('');
            const [signupPassword, setSignupPassword] = useState('');
            const [signupName, setSignupName] = useState('');
            const [authError, setAuthError] = useState('');
            const [authSuccess, setAuthSuccess] = useState('');

            const [activeTab, setActiveTab] = useState('matches');
            const [selectedMatch, setSelectedMatch] = useState(null);
            const [selectedPlayers, setSelectedPlayers] = useState([]);
            const [captain, setCaptain] = useState(null);
            const [viceCaptain, setViceCaptain] = useState(null);
            const [myTeams, setMyTeams] = useState({});
            const [contest, setContest] = useState(null);
            const [contestName, setContestName] = useState('');
            const [joinContestCode, setJoinContestCode] = useState('');
            const [updateMatchId, setUpdateMatchId] = useState(null);
            const [playerPoints, setPlayerPoints] = useState({});

            useEffect(() => {
                const savedUser = localStorage.getItem('currentUser');
                if (savedUser) {
                    setCurrentUser(JSON.parse(savedUser));
                }

                const savedTeams = localStorage.getItem('myTeams');
                if (savedTeams) setMyTeams(JSON.parse(savedTeams));

                const savedContest = localStorage.getItem('contest');
                if (savedContest) setContest(JSON.parse(savedContest));

                const savedPoints = localStorage.getItem('playerPoints');
                if (savedPoints) setPlayerPoints(JSON.parse(savedPoints));
            }, []);

            useEffect(() => {
                if (currentUser) {
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                }
            }, [currentUser]);

            useEffect(() => {
                localStorage.setItem('myTeams', JSON.stringify(myTeams));
            }, [myTeams]);

            useEffect(() => {
                if (contest) {
                    localStorage.setItem('contest', JSON.stringify(contest));
                }
            }, [contest]);

            useEffect(() => {
                localStorage.setItem('playerPoints', JSON.stringify(playerPoints));
            }, [playerPoints]);

            const handleLogin = () => {
                setAuthError('');
                
                // Check admin credentials
                if (loginUsername === ADMIN_USERNAME && loginPassword === ADMIN_PASSWORD) {
                    const adminUser = {
                        id: 'admin',
                        username: ADMIN_USERNAME,
                        name: ADMIN_USERNAME,
                        isAdmin: true
                    };
                    setCurrentUser(adminUser);
                    return;
                }

                // Check regular users
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const user = users.find(u => u.username === loginUsername && u.password === loginPassword);
                
                if (user) {
                    setCurrentUser({
                        id: user.id,
                        username: user.username,
                        name: user.name,
                        isAdmin: false
                    });
                } else {
                    setAuthError('Invalid username or password');
                }
            };

            const handleSignup = () => {
                setAuthError('');
                setAuthSuccess('');

                if (!signupUsername || !signupPassword || !signupName) {
                    setAuthError('All fields are required');
                    return;
                }

                if (signupUsername.length < 3) {
                    setAuthError('Username must be at least 3 characters');
                    return;
                }

                if (signupPassword.length < 6) {
                    setAuthError('Password must be at least 6 characters');
                    return;
                }

                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                if (users.find(u => u.username === signupUsername)) {
                    setAuthError('Username already exists');
                    return;
                }

                const newUser = {
                    id: Date.now().toString(),
                    username: signupUsername,
                    password: signupPassword,
                    name: signupName
                };

                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                
                setAuthSuccess('Account created! Please login.');
                setSignupUsername('');
                setSignupPassword('');
                setSignupName('');
                setAuthMode('login');
            };

            const handleLogout = () => {
                setCurrentUser(null);
                localStorage.removeItem('currentUser');
                setActiveTab('matches');
            };

            const selectMatch = (match) => {
                setSelectedMatch(match);
                setSelectedPlayers([]);
                setCaptain(null);
                setViceCaptain(null);
                setActiveTab('teamSelection');
            };

            const getAvailablePlayers = () => {
                if (!selectedMatch) return [];
                return PLAYERS.filter(p => 
                    p.team === selectedMatch.team1 || p.team === selectedMatch.team2
                );
            };

            const togglePlayerSelection = (player) => {
                if (selectedPlayers.find(p => p.id === player.id)) {
                    setSelectedPlayers(selectedPlayers.filter(p => p.id !== player.id));
                    if (captain === player.id) setCaptain(null);
                    if (viceCaptain === player.id) setViceCaptain(null);
                } else if (selectedPlayers.length < 11) {
                    setSelectedPlayers([...selectedPlayers, player]);
                }
            };

            const saveTeam = () => {
                if (selectedPlayers.length !== 11) {
                    alert('Please select exactly 11 players');
                    return;
                }
                if (!captain || !viceCaptain) {
                    alert('Please select captain and vice-captain');
                    return;
                }
                if (captain === viceCaptain) {
                    alert('Captain and vice-captain must be different');
                    return;
                }

                const newTeam = {
                    matchId: selectedMatch.id,
                    matchName: `${selectedMatch.team1} vs ${selectedMatch.team2}`,
                    players: selectedPlayers,
                    captain,
                    viceCaptain
                };

                setMyTeams({ ...myTeams, [selectedMatch.id]: newTeam });
                alert('Team saved successfully!');
                setActiveTab('myTeams');
            };

            const createContest = () => {
                if (!contestName) {
                    alert('Please enter contest name');
                    return;
                }

                const code = Math.random().toString(36).substring(2, 8).toUpperCase();
                const newContest = {
                    name: contestName,
                    code,
                    matches: MATCHES,
                    participants: {}
                };

                setContest(newContest);
                setContestName('');
            };

            const joinContest = () => {
                if (!joinContestCode) {
                    alert('Please enter contest code');
                    return;
                }

                if (contest && contest.code === joinContestCode.toUpperCase()) {
                    const updatedContest = { ...contest };
                    updatedContest.participants[currentUser.id] = {
                        userId: currentUser.id,
                        name: currentUser.name,
                        totalPoints: 0,
                        matchPoints: {}
                    };
                    setContest(updatedContest);
                    setJoinContestCode('');
                    alert('Joined contest successfully!');
                } else {
                    alert('Invalid contest code');
                }
            };

            const updatePlayerPointsValue = (playerId, value) => {
                const key = `${updateMatchId}-${playerId}`;
                setPlayerPoints({ ...playerPoints, [key]: parseInt(value) || 0 });
            };

            const calculateAndUpdateLeaderboard = () => {
                if (!contest || !updateMatchId) {
                    alert('Please select a match');
                    return;
                }

                const updatedContest = { ...contest };

                Object.values(updatedContest.participants).forEach(participant => {
                    const team = myTeams[updateMatchId];
                    
                    if (team && team.players) {
                        let matchPoints = 0;
                        
                        team.players.forEach(player => {
                            const key = `${updateMatchId}-${player.id}`;
                            const points = playerPoints[key] || 0;
                            
                            if (player.id === team.captain) {
                                matchPoints += points * 2;
                            } else if (player.id === team.viceCaptain) {
                                matchPoints += points * 1.5;
                            } else {
                                matchPoints += points;
                            }
                        });

                        participant.matchPoints[updateMatchId] = matchPoints;
                        participant.totalPoints = Object.values(participant.matchPoints).reduce((a, b) => a + b, 0);
                    }
                });

                setContest(updatedContest);
                alert('Leaderboard updated successfully!');
            };

            const getLeaderboard = () => {
                if (!contest) return [];
                return Object.values(contest.participants).sort((a, b) => b.totalPoints - a.totalPoints);
            };

            // Authentication screen
            if (!currentUser) {
                return (
                    <div className="auth-container">
                        <div className="header">
                            <h1>üèè T20 Fantasy</h1>
                            <p>Login or Create Account</p>
                        </div>

                        <div className="card">
                            <div className="auth-tabs">
                                <button 
                                    className={`auth-tab ${authMode === 'login' ? 'active' : ''}`}
                                    onClick={() => {
                                        setAuthMode('login');
                                        setAuthError('');
                                        setAuthSuccess('');
                                    }}
                                >
                                    Login
                                </button>
                                <button 
                                    className={`auth-tab ${authMode === 'signup' ? 'active' : ''}`}
                                    onClick={() => {
                                        setAuthMode('signup');
                                        setAuthError('');
                                        setAuthSuccess('');
                                    }}
                                >
                                    Sign Up
                                </button>
                            </div>

                            {authError && <div className="error-message">{authError}</div>}
                            {authSuccess && <div className="success-message">{authSuccess}</div>}

                            {authMode === 'login' ? (
                                <>
                                    <div className="input-group">
                                        <label>Username</label>
                                        <input 
                                            type="text" 
                                            value={loginUsername}
                                            onChange={(e) => setLoginUsername(e.target.value)}
                                            placeholder="Enter username"
                                            onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                                        />
                                    </div>
                                    <div className="input-group">
                                        <label>Password</label>
                                        <input 
                                            type="password" 
                                            value={loginPassword}
                                            onChange={(e) => setLoginPassword(e.target.value)}
                                            placeholder="Enter password"
                                            onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                                        />
                                    </div>
                                    <button className="btn" onClick={handleLogin} style={{width: '100%'}}>
                                        Login
                                    </button>
                                </>
                            ) : (
                                <>
                                    <div className="input-group">
                                        <label>Full Name</label>
                                        <input 
                                            type="text" 
                                            value={signupName}
                                            onChange={(e) => setSignupName(e.target.value)}
                                            placeholder="Enter your name"
                                        />
                                    </div>
                                    <div className="input-group">
                                        <label>Username</label>
                                        <input 
                                            type="text" 
                                            value={signupUsername}
                                            onChange={(e) => setSignupUsername(e.target.value)}
                                            placeholder="Choose a username"
                                        />
                                    </div>
                                    <div className="input-group">
                                        <label>Password</label>
                                        <input 
                                            type="password" 
                                            value={signupPassword}
                                            onChange={(e) => setSignupPassword(e.target.value)}
                                            placeholder="Choose a password (min 6 characters)"
                                        />
                                    </div>
                                    <button className="btn" onClick={handleSignup} style={{width: '100%'}}>
                                        Create Account
                                    </button>
                                </>
                            )}
                        </div>

                        <div className="info-box" style={{marginTop: '20px'}}>
                            <h3>‚ÑπÔ∏è How to Get Started</h3>
                            <p><strong>New User?</strong> Click "Sign Up" to create your account</p>
                            <p><strong>Admin?</strong> Login with admin credentials</p>
                        </div>
                    </div>
                );
            }

            // Main app for logged in users
            return (
                <div>
                    <div className="header">
                        <h1>üèè T20 WORLD CUP FANTASY</h1>
                        <p>Build Your Dream Team & Compete!</p>
                        <div className="user-badge">
                            {currentUser.isAdmin && <span className="admin-badge">ADMIN</span>}
                            <span>{currentUser.name}</span>
                        </div>
                    </div>

                    <div className="tabs">
                        <button className={`tab ${activeTab === 'matches' ? 'active' : ''}`} onClick={() => setActiveTab('matches')}>
                            Matches
                        </button>
                        {selectedMatch && (
                            <button className={`tab ${activeTab === 'teamSelection' ? 'active' : ''}`} onClick={() => setActiveTab('teamSelection')}>
                                Team Selection
                            </button>
                        )}
                        <button className={`tab ${activeTab === 'myTeams' ? 'active' : ''}`} onClick={() => setActiveTab('myTeams')}>
                            My Teams
                        </button>
                        <button className={`tab ${activeTab === 'contest' ? 'active' : ''}`} onClick={() => setActiveTab('contest')}>
                            Contest
                        </button>
                        <button className={`tab ${activeTab === 'leaderboard' ? 'active' : ''}`} onClick={() => setActiveTab('leaderboard')}>
                            Leaderboard
                        </button>
                        {currentUser.isAdmin && (
                            <button className={`tab ${activeTab === 'adminPanel' ? 'active' : ''}`} onClick={() => setActiveTab('adminPanel')}>
                                Admin Panel
                            </button>
                        )}
                    </div>

                    {/* MATCHES TAB */}
                    {activeTab === 'matches' && (
                        <div className="card">
                            <h2>Upcoming Matches</h2>
                            <div className="match-grid">
                                {MATCHES.map(match => (
                                    <div key={match.id} className="match-card" onClick={() => selectMatch(match)}>
                                        <h3>üèÜ {match.team1} vs {match.team2}</h3>
                                        <p>üìÖ {match.date}</p>
                                        <p>üìç {match.venue}</p>
                                        {myTeams[match.id] && (
                                            <p style={{marginTop: '12px', color: '#10b981', fontWeight: '600'}}>
                                                ‚úÖ Team Created
                                            </p>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* TEAM SELECTION TAB */}
                    {activeTab === 'teamSelection' && selectedMatch && (
                        <div>
                            <div className="card">
                                <h2>Select Your Team: {selectedMatch.team1} vs {selectedMatch.team2}</h2>
                                <div className="info-box">
                                    <h3>üìã Team Selection Rules</h3>
                                    <p>‚Ä¢ Select exactly 11 players from both teams</p>
                                    <p>‚Ä¢ Choose 1 Captain (2x points) and 1 Vice-Captain (1.5x points)</p>
                                    <p>‚Ä¢ Build a balanced team with batsmen, bowlers, and all-rounders</p>
                                </div>
                                
                                <div className="player-grid">
                                    {getAvailablePlayers().map(player => (
                                        <div
                                            key={player.id}
                                            className={`player-card ${selectedPlayers.find(p => p.id === player.id) ? 'selected' : ''}`}
                                            onClick={() => togglePlayerSelection(player)}
                                        >
                                            <h4>{player.name}</h4>
                                            <p className="role">{player.role}</p>
                                            <p className="team">{player.team}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {selectedPlayers.length > 0 && (
                                <div className="selected-team">
                                    <h3>Your Selected Team</h3>
                                    <p className="count">Selected: {selectedPlayers.length}/11 players</p>
                                    <div className="selected-players">
                                        {selectedPlayers.map(player => (
                                            <div key={player.id} className="selected-player">
                                                <div>
                                                    <div className="name">{player.name}</div>
                                                    <div className="role">{player.role}</div>
                                                </div>
                                                <button className="remove-btn" onClick={() => togglePlayerSelection(player)}>√ó</button>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {selectedPlayers.length === 11 && (
                                <div className="captain-selection">
                                    <h3>Select Captain & Vice-Captain</h3>
                                    <div className="captain-options">
                                        {selectedPlayers.map(player => (
                                            <div
                                                key={player.id}
                                                className={`captain-option ${captain === player.id || viceCaptain === player.id ? 'selected' : ''}`}
                                                onClick={() => {
                                                    if (!captain) {
                                                        setCaptain(player.id);
                                                    } else if (!viceCaptain && captain !== player.id) {
                                                        setViceCaptain(player.id);
                                                    } else {
                                                        setCaptain(null);
                                                        setViceCaptain(null);
                                                    }
                                                }}
                                            >
                                                {player.name}
                                                {captain === player.id && <div style={{color: '#f59e0b', fontWeight: '700', marginTop: '5px'}}>Captain (C)</div>}
                                                {viceCaptain === player.id && <div style={{color: '#3b82f6', fontWeight: '700', marginTop: '5px'}}>Vice-Captain (VC)</div>}
                                            </div>
                                        ))}
                                    </div>
                                    <button 
                                        className="btn" 
                                        onClick={saveTeam}
                                        disabled={!captain || !viceCaptain}
                                        style={{marginTop: '20px', width: '100%'}}
                                    >
                                        Save Team
                                    </button>
                                </div>
                            )}
                        </div>
                    )}

                    {/* MY TEAMS TAB */}
                    {activeTab === 'myTeams' && (
                        <div className="card">
                            <h2>My Teams</h2>
                            {Object.keys(myTeams).length === 0 ? (
                                <div>
                                    <p style={{color: '#94a3b8', marginBottom: '20px'}}>No teams created yet.</p>
                                    <button className="btn" onClick={() => setActiveTab('matches')}>View Matches</button>
                                </div>
                            ) : (
                                <div className="my-teams-grid">
                                    {Object.values(myTeams).map(team => (
                                        <div key={team.matchId} className="team-card">
                                            <h4>üèè {team.matchName}</h4>
                                            <div className="team-players-grid">
                                                {team.players.map(p => (
                                                    <div key={p.id} className={`team-player ${p.id === team.captain ? 'captain' : p.id === team.viceCaptain ? 'vc' : ''}`}>
                                                        {p.name} {p.id === team.captain ? '(C)' : p.id === team.viceCaptain ? '(VC)' : ''}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}

                    {/* CONTEST TAB */}
                    {activeTab === 'contest' && (
                        <div>
                            {!contest ? (
                                currentUser.isAdmin ? (
                                    <div className="card">
                                        <h2>Create Contest (Admin Only)</h2>
                                        <div className="info-box">
                                            <h3>üë®‚Äçüíº Admin Instructions</h3>
                                            <p>Create the main contest for the World Cup. You'll get a code to share with participants.</p>
                                        </div>
                                        <div className="input-group">
                                            <label>Contest Name</label>
                                            <input type="text" value={contestName} onChange={(e) => setContestName(e.target.value)} placeholder="e.g., World Cup 2026 Contest" />
                                        </div>
                                        <button className="btn" onClick={createContest}>Create Contest</button>
                                    </div>
                                ) : (
                                    <div className="card">
                                        <h2>No Contest Available</h2>
                                        <p style={{color: '#94a3b8'}}>Please wait for the admin to create a contest.</p>
                                    </div>
                                )
                            ) : (
                                <div>
                                    <div className="card">
                                        <h2>{contest.name}</h2>
                                        <div className="contest-code">
                                            <p style={{fontSize: '14px', marginBottom: '8px', color: '#94a3b8'}}>Contest Code</p>
                                            <div className="contest-code-value">{contest.code}</div>
                                            <p style={{fontSize: '13px', marginTop: '8px', color: '#94a3b8'}}>Share this code with participants</p>
                                        </div>
                                        <div style={{marginTop: '15px', padding: '12px', background: '#0a0e27', borderRadius: '10px'}}>
                                            <p style={{color: '#cbd5e1'}}>üë• Participants: <strong>{Object.keys(contest.participants).length}</strong></p>
                                            <p style={{color: '#cbd5e1', marginTop: '6px'}}>üèè Matches: <strong>{contest.matches.length}</strong></p>
                                        </div>
                                    </div>

                                    {!contest.participants[currentUser.id] && !currentUser.isAdmin && (
                                        <div className="card">
                                            <h2>Join Contest</h2>
                                            <div className="input-group">
                                                <label>Enter Contest Code</label>
                                                <input type="text" value={joinContestCode} onChange={(e) => setJoinContestCode(e.target.value)} placeholder="Enter code" />
                                            </div>
                                            <button className="btn btn-secondary" onClick={joinContest}>Join Contest</button>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    )}

                    {/* LEADERBOARD TAB */}
                    {activeTab === 'leaderboard' && (
                        <div className="card">
                            <h2>Contest Leaderboard</h2>
                            {!contest ? (
                                <p style={{color: '#94a3b8'}}>No contest found.</p>
                            ) : (
                                <table className="leaderboard-table">
                                    <thead>
                                        <tr><th>Rank</th><th>Player</th><th>Points</th></tr>
                                    </thead>
                                    <tbody>
                                        {getLeaderboard().map((p, i) => (
                                            <tr key={p.userId}>
                                                <td><span className={`rank-badge ${i === 0 ? 'rank-1' : i === 1 ? 'rank-2' : i === 2 ? 'rank-3' : ''}`}>{i + 1}</span></td>
                                                <td style={{fontWeight: p.userId === currentUser.id ? '700' : '400'}}>{p.name} {p.userId === currentUser.id ? '(You)' : ''}</td>
                                                <td><strong style={{fontSize: '1.1rem', color: '#10b981'}}>{p.totalPoints}</strong></td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            )}
                        </div>
                    )}

                    {/* ADMIN PANEL TAB (Admin only) */}
                    {activeTab === 'adminPanel' && currentUser.isAdmin && (
                        <div className="card">
                            <h2>Admin Panel - Update Match Points</h2>
                            
                            <div className="info-box" style={{marginBottom: '20px'}}>
                                <h3>üìä Instructions</h3>
                                <p>1. Select completed match</p>
                                <p>2. Enter points for each player</p>
                                <p>3. Click "Calculate & Update Leaderboard"</p>
                                <p>4. All participants' points will update automatically with C/VC multipliers</p>
                            </div>

                            <div className="input-group">
                                <label>Select Match</label>
                                <select onChange={(e) => setUpdateMatchId(e.target.value)} value={updateMatchId || ''}>
                                    <option value="">Choose match...</option>
                                    {MATCHES.map(m => (
                                        <option key={m.id} value={m.id}>{m.team1} vs {m.team2} - {m.date}</option>
                                    ))}
                                </select>
                            </div>

                            {updateMatchId && (
                                <>
                                    <div className="points-grid">
                                        {getAvailablePlayers().map(player => (
                                            <div key={player.id} className="points-input-item">
                                                <label>{player.name}</label>
                                                <input type="number" value={playerPoints[`${updateMatchId}-${player.id}`] || 0} onChange={(e) => updatePlayerPointsValue(player.id, e.target.value)} placeholder="0" />
                                            </div>
                                        ))}
                                    </div>
                                    <button className="btn" onClick={calculateAndUpdateLeaderboard} style={{marginTop: '20px', width: '100%'}}>
                                        Calculate & Update Leaderboard
                                    </button>
                                </>
                            )}
                        </div>
                    )}

                    <div style={{textAlign: 'center', marginTop: '25px'}}>
                        <button className="btn btn-danger btn-small" onClick={handleLogout}>Logout</button>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>